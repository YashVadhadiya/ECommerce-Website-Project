!function(i){var n={timeout:3e5,data:{},remove:function(e){delete n.data[e]},exist:function(e){return!!n.data[e]&&(new Date).getTime()-n.data[e]._<n.timeout},get:function(e){return n.data[e].data},set:function(e,t,a){n.remove(e),n.data[e]={_:(new Date).getTime(),data:t},a&&"function"==typeof a&&a(t)}};i.ajaxPrefilter(function(r,e,t){if("cartflows"===r.author){var o=e.complete||i.noop,s=e.url;r.beforeSend=function(){if(n.exist(s)){var e=n.get(s);return CartFlowsAPI._api_cached_request(e),!1}return!0},r.complete=function(e,t){var a={args:r.args,items:e.responseText?JSON.parse(e.responseText):"",items_count:e.getResponseHeader("x-wp-total")||0,callback:r.callback,status:t,XHR:e};n.set(s,a,o)}}}),CartFlowsAPI={_log:function(e,t){if(CartFlowsImportVars.debug&&"table"!==t)(new Date).toLocaleTimeString()},_api_url:CartFlowsImportVars.server_rest_url,_api_cached_request:function(e){CartFlowsAPI._log(n.data,"table"),CartFlowsAPI._log("Current time "+(new Date).getTime()),CartFlowsAPI._log("Cache expired in "+parseInt(n.timeout)/1e3+" seconds."),void 0!==e.args.trigger&&""!==e.args.trigger&&i(document).trigger(e.args.trigger,[e]),e.callback&&"function"==typeof e.callback&&e.callback(e)},_api_request:function(o,s){var a={url:CartFlowsAPI._api_url+o.slug,args:o,callback:s,headers:CartFlowsImportVars.headers,author:"cartflows"};i.ajax(a).done(function(e,t,a){if("success"===t&&a.getResponseHeader("x-wp-total")){var r={args:o,items:e,items_count:a.getResponseHeader("x-wp-total")||0,callback:s,status:t,XHR:a};void 0!==o.trigger&&""!==o.trigger&&i(document).trigger(o.trigger,[r])}else i(document).trigger("cartflows-api-request-error");s&&"function"==typeof s&&s(r)}).fail(function(e,t){i(document).trigger("cartflows-api-request-fail",[a,e,t])}).always(function(){i(document).trigger("cartflows-api-request-always")})}}}(jQuery);